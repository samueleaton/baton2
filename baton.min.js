var baton=function(){var t={then:function(e){return"function"==typeof e&&t.utils.queue.push(e),t},next:function(){var e=Array.prototype.splice.call(arguments,0);return"undefined"!=typeof t.utils.queue[t.utils.i+1]?(t.utils.i++,t.utils.queue[t.utils.i].apply({next:t.next},e)):void 0},utils:{queue:[],i:-1}};return function(){function e(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return i.utils.i=-1,i.next.apply(null,t)}for(var n=[],u=0,r=arguments.length;r>u;u++)"function"==typeof arguments[u]&&n.push(arguments[u]);for(var i=Object.create(t),u=0,r=n.length;r>u;u++)i=i.then(n[u]);return e.append=i.then,e}}();