<!DOCTYPE html>
<html>

<head>
	<title>baton Demo</title>
</head>

<body>

<script type="text/javascript" src="baton.js"></script>

<script>

// function wait(time, _callback){
// 	console.log("pause for "+(time/1000)+" second");
// 	setTimeout(function(){
// 		console.log("(done waiting)");
// 		_callback();
// 	}, time);
// }

// var series = baton(function(NAME){
// 	console.log("What's your name? =>",NAME);
// 	return this.next("Ralph","Waldo", "Emerson");
// })
// .then(function(first, middle, last){
// 	console.log("My name is "+first+" "+middle+" "+last);
// 	console.log(this);
// 	(function(nxt){nxt();})(this.next);
// 	// return this.next();
// });

// series.then(function(){
// 	console.log("kanga");
// 	return "Kangaroo!";
// });

// console.log(series("Sam"));
var async = function(callback, timer){
	var self = this;
	setTimeout(function(){
		callback.call(self);
	}, timer);
}

baton(
	function(){
		async.call(this, function(){
			console.log("checkpoint 1");
			this.next();
		}, 1000);
	},
	function(letters){
		async.call(this, function(){
			console.log("checkpoint 2");
			this.next();
		}, 1000);
	},
	function(name){
		async.call(this, function(){
			console.log("checkpoint 3");
			this.next()
		}, 1000);
	}
)
series.append(function(){
	console.log("sam");
})

series();
// console.log("result => ",);



// function show(bean, ben, thing) {
//   console.log(bean+' , '+ben+' , '+thing);
// }
// function run(f) {
//   // use splice to get all the arguments after 'f'

//   var args = Array.prototype.splice.call(arguments, 1);
//   // console.log(args);
//   f.apply(null, args);
// }

// run(show, 'pickle', 'giraffe', "hippo");







// .then(function(next, data){
// 	console.log("second");
// 	next(data);
// })

// batty.yield(5);



// var race = baton(function(next){
	
// 	console.log("beginning...")
// 	next();
	
// }).then(function(next){
	
// 	wait(1500, function(){
// 		// this waiting could represent reading a file, making an ajax call, etc.
// 		next("sam");
// 	});

// }).then(function(next, person){
	
// 	console.log("Hello, I'm "+person+".")
// 	next();
	
// }).then(function(next){
	
// 	console.log("All done!!");

// });

// console.log(
// 	baton(function(next, person){
// 		return next("person!");
// 	}).yield()
// );


// race.yield()

</script>

</body>

</html>








